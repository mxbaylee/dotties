#!/bin/bash

# Opens modified files in your preferred editor. If no uncommitted changes,
# opens files from last commit.
#
# Usage:
#   git open
#
# Environment Variables:
#   EDITOR - Set to your preferred editor (e.g., "vim", "cursor", "code")
#            Defaults to "cursor" if not set
#
# Opens:
#   ğŸ”„ Uncommitted changes (if any)
#   ğŸ“ Last commit's files (if clean)

# Use EDITOR environment variable, default to cursor
EDITOR=${EDITOR:-cursor}

dirty=`git status --porcelain -uno | sed s/^...//`
last_modified=`git show --pretty="format:" --name-only HEAD`

if [ -n "$dirty" ]; then
    echo "ğŸ”„ Opening modified files in $EDITOR..."
    $EDITOR $dirty
else
    echo "ğŸ“ Opening files from last commit in $EDITOR..."
    $EDITOR $last_modified
fi
